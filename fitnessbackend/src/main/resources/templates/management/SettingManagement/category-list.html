<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
  <th:block th:insert="/fragments/admin_fragment/head"></th:block>
  <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/js/richtexteditor/rte_theme_default.css}">
</head>
<body class="ttr-opened-sidebar ttr-pinned-sidebar">

<!-- header start -->
<th:block th:insert="/fragments/admin_fragment/header"></th:block>
<!-- header end -->
<!-- Left sidebar menu start -->
<th:block th:insert="/fragments/admin_fragment/sidebar_fragment"></th:block>
<style>
  body {
    color: #566787;
    background: #f5f5f5;
    font-family: 'Roboto', sans-serif;
  }

  .table-responsive {
    margin: 30px 0;
  }

  .table-wrapper {
    min-width: 1000px;
    background: #fff;
    padding: 20px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
  }

  .table-title {
    padding-bottom: 10px;
    margin: 0 0 10px;
    min-width: 100%;
  }

  .table-title h2 {
    margin: 8px 0 0;
    font-size: 22px;
  }

  .search-box {
    position: relative;
    float: right;
  }

  .search-box input {
    height: 34px;
    border-radius: 20px;
    padding-left: 35px;
    border-color: #ddd;
    box-shadow: none;
  }

  .search-box input:focus {
    border-color: #3FBAE4;
  }

  .search-box i {
    color: #a0a5b1;
    position: absolute;
    font-size: 19px;
    top: 8px;
    left: 10px;
  }

  table.table tr th, table.table tr td {
    border-color: #e9e9e9;
  }

  table.table-striped tbody tr:nth-of-type(odd) {
    background-color: #fcfcfc;
  }

  table.table-striped.table-hover tbody tr:hover {
    background: #f5f5f5;
  }

  table.table th i {
    font-size: 13px;
    margin: 0 5px;
    cursor: pointer;
  }

  table.table td:last-child {
    width: 130px;
  }

  table.table td a {
    color: #a0a5b1;
    display: inline-block;
    margin: 0 5px;
  }

  table.table td a.view {
    color: #03A9F4;
  }

  table.table td a.edit {
    color: #FFC107;
  }

  table.table td a.delete {
    color: #E34724;
  }

  table.table td i {
    font-size: 19px;
  }

  .pagination {
    float: right;
    margin: 0 0 5px;
  }

  .pagination li a {
    border: none;
    font-size: 95%;
    width: 30px;
    height: 30px;
    color: #999;
    margin: 0 2px;
    line-height: 30px;
    border-radius: 30px !important;
    text-align: center;
    padding: 0;
  }

  .pagination li a:hover {
    color: #666;
  }

  .pagination li.active a {
    background: #03A9F4;
  }

  .pagination li.active a:hover {
    background: #0397d6;
  }

  .pagination li.disabled i {
    color: #ccc;
  }

  .pagination li i {
    font-size: 16px;
    padding-top: 6px
  }

  .hint-text {
    float: left;
    margin-top: 6px;
    font-size: 95%;
  }
</style>
<script>

</script>
</head>
<main class="ttr-wrapper">
  <div class="container-fluid">
    <div class="db-breadcrumb">
      <h4 class="breadcrumb-title">City</h4>
      <ul class="db-breadcrumb-list">
        <li><a th:href="@{/dashboard}"><i class="fa fa-home"></i>Dashboard</a></li>
        <li>Category</li>
      </ul>
    </div>

    <div class="row">
      <div class="col-lg-12 m-b30">
        <div class="widget-box">
          <div class="wc-title row" style="display: flex; justify-content: space-between">
            <h4>Category List</h4>
            <div>
              <!-- Button trigger modal -->
              <button class="btn btn-primary" data-target="#exampleModalCenter" data-toggle="modal" type="button">
                <i class="fa fa-plus-circle" style="font-size:18px"></i>
                Add new Category
              </button>

              <!-- Modal -->
              <div aria-hidden="true" aria-labelledby="exampleModalCenterTitle" class="modal fade"
                   id="exampleModalCenter"
                   role="dialog" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalCenterTitle">New Category</h5>
                      <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form method="post" th:action="@{/setting/management/category/add-category}"
                            th:object="${categoryDTO}">
                        <div class="mb-3">
                          <label class="form-label" for="cate_name">Category Name</label>
                          <input class="form-control" id="cate_name" placeholder="Name"
                                 th:field="*{name}" type="text">
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Type</label>
                          <br>
                          <select class="form-select" id="category_id" name="category_id"
                                  style="margin-left: 10px;" th:field="${categoryDTO.type}">
                            <option th:each="type:${listType}" th:text="${type}" th:value="${type}">
                            </option>
                          </select>
                        </div>
                        <div class="mb-3" style="display: flex; flex-direction: column;">
                          <label class="form-label" for="cate_des">Description</label>
                          <textarea id="cate_des" placeholder="Description" th:field="${categoryDTO.des}"></textarea>
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                          <button class="btn btn-primary" style="background-color: #00a834" type="submit">Add</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-xl">
            <div class="table-responsive">
              <div class="table-wrapper">
                <div class="table-title">
                  <form id="searchAndFilterDashboard" method="get"
                        th:action="@{/setting/management/category}">
                    <div class="row">
                      <div class="col-md-4">
                        Type: <br><select onchange="submitFormDashboard()" style="width:50%" th:name="type">
                        <option>All</option>
                        <th:block th:each="type : ${listType}">
                          <option th:selected="${type == currentType}"
                                  th:text="${type}"
                                  th:value="${type}"></option>
                        </th:block>
                      </select>
                      </div>
                    </div>
                  </form>
                </div>
                <div>
                  <table class="table table-striped table-hover table-bordered" id="PackageTable">
                    <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="category: ${listCategory}">
                      <td th:text="${category.name}"></td>
                      <td th:text="${category.type}"></td>
                      <td th:text="${category.des}"></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div id="pagination">
                  <nav>
                    <ul class="pagination justify-content-center">
                      <li class="page-item"
                          th:classappend="${currentPage - 1 == 0 ? 'disabled':''}"
                          th:if="${currentPage -1 > 0}">
                        <a class="page-link"
                           th:href="@{/setting/management/category(page=${currentPage - 1},type=${currentType})}">
                          Prev
                        </a>
                      </li>
                      <li class="page-item" th:classappend="${currentPage == i}? 'active' :'' "
                          th:each="i: ${#numbers.sequence(1,totalPage)}">
                        <a class="page-link"
                           th:href="@{/setting/management/category(page=${i},type=${currentType})}"
                           th:text="${i}">
                        </a>
                      </li>
                      <li class="page-item"
                          th:classappend="${currentPage == totalPage}  ? 'disabled':''"
                          th:if="${currentPage < totalPage}">
                        <a class="page-link"
                           th:href="@{/setting/management/category(page=${currentPage + 1},type=${currentType})}">
                          Next
                        </a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</main>
<th:block th:insert="/fragments/admin_fragment/script"></th:block>
<script crossorigin="anonymous"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.min.js"></script>
<script>
  $(document).ready(function () {
    $('#PackageTable').DataTable({
      "searching": false,
      columnDefs: [{
        visible: false,
        searchable: false
      }],
      pagingType: 'full_numbers',
      bLengthChange: false,
      paging: false,
      info: false,
      searching: false,

    });
    $('[data-toggle="tooltip"]').tooltip();
  });

</script>
<script type="text/javascript">
  function submitFormDashboard() {
    document.getElementById("searchAndFilterDashboard").submit();
  }
</script>
<style>
  .bootstrap-select .dropdown-toggle {
    color: black;
  }
</style>
</body>
</html>


